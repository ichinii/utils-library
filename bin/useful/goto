#!/bin/bash

libpath="$ul_tmpdir/gotolib"
usage="Usage:\tgoto -n <id> <path>\n\tgoto <id>\n\tgoto -l"

if [ ! -f "$libpath" ]; then
	touch "$libpath"
fi

if [ -z "$1" ]; then
	echo -e "$usage"
	return
fi

if [ $1 == "-l" ]; then
	while read LINE
	do
		printf ${LINE%:*}
		printf " -> "
		printf ${LINE#*:}
		echo
	done < $libpath
	return
fi

if [ $1 == "-n" ]; then
	if [ -n "$3" ]; then # TODO missing: error if ID already defined
		echo "$2:$3" >> $libpath
	else
		echo "goto: Too few arguments | goto -n <id> <path>"
	fi
else
	id=$1
	line=$(grep "$id:" $libpath)
	line=${line#*:}
	if [ -n "$line" ]; then
		cd $line
	else
		echo "id '$1' not found"
	fi
fi
